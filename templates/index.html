<!DOCTYPE html>
<html>

<head>
	<title>Raspberry Pi File Upload</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
	<div class="disk-space-info">
		ğŸ’¾ Free: <span id="freeSpace">{{ disk_space.free }}</span> / {{ disk_space.total }}
	</div>

	<h2>ğŸ“ File Upload & Image Preview</h2>
	<form method="POST" enctype="multipart/form-data" id="uploadForm">
		<div class="drop-zone" id="dropZone">
			<p class="drop-zone-text">ğŸ“ Drag & drop, paste (Ctrl+V), or click to browse</p>
			<input type="file" name="file" id="fileInput" style="display: none;">
		</div>
		<input type="submit" value="Upload" id="uploadBtn" disabled>
	</form>

	<hr>

	<h3>Uploaded Files <span style="font-weight: normal;">({{ file_count }} files)</span></h3>
	<div class="file-actions" style="margin: 8px 0;">
		<button class="delete-btn" onclick="deleteAllFiles()" {% if file_count==0 %}disabled{% endif %}>ğŸ—‘ï¸ Delete All</button>
	</div>
	
	{% if grouped_files %}
		{% for date_key, files in grouped_files.items() %}
		<div class="date-group">
			<h4 class="date-header">{{ format_date_header(date_key) }}</h4>
			<ul>
				{% for file_info in files %}
				<li>
					<div class="file-item">
						<div class="file-name">
							<a href="/files/{{ file_info.filename }}">{{ file_info.filename }}</a>
						</div>
						{% if file_info.is_image %}
						<a href="/files/{{ file_info.filename }}" target="_blank" rel="noopener noreferrer">
							<img src="/files/{{ file_info.filename }}" alt="{{ file_info.filename }}">
						</a>
						{% endif %}
						<div class="file-actions">
							<a href="/files/{{ file_info.filename }}" download class="download-btn">â¬‡ï¸ Download</a>
							<button class="delete-btn" onclick="deleteFile('{{ file_info.filename }}')">ğŸ—‘ï¸ Delete</button>
						</div>
					</div>
				</li>
				{% endfor %}
			</ul>
		</div>
		{% endfor %}
	{% else %}
		<p style="text-align: center; color: #b8c2cc; margin-top: 20px;">No files uploaded yet</p>
	{% endif %}

	<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>
